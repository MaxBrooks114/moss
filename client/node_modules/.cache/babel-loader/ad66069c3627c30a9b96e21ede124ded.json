{"ast":null,"code":"import _defineProperty from \"/Users/maxbrooks/Development/code/moss/moss-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/maxbrooks/Development/code/moss/moss-client/src/containers/Reviews/EditReviewFormWrapper.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport ReviewForm from '../.././components/reviews/ReviewForm';\nimport { updateReview, deleteReview } from '../.././actions/reviews/reviews';\nimport { setFormDataForEdit, resetReviewForm } from '../.././actions/reviews/reviewForm';\nimport { connect } from 'react-redux';\nimport Card from 'react-bootstrap/Card';\nimport Button from 'react-bootstrap/Button';\n\nclass EditReviewFormWrapper extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    this.handleSubmit = formData => {\n      const _this$props = this.props,\n            updateReview = _this$props.updateReview,\n            review = _this$props.review,\n            history = _this$props.history;\n      updateReview(_objectSpread({}, formData, {\n        reviewId: review.id\n      }), history);\n    };\n  }\n\n  componentDidMount() {\n    this.props.review && this.props.setFormDataForEdit(this.props.review);\n  }\n\n  componentDidUpdate(prevProps) {\n    this.props.review && !prevProps.review && this.props.setFormDataForEdit(this.props.review);\n  }\n\n  componentWillUnmount() {\n    this.props.resetReviewForm();\n  }\n\n  render() {\n    const _this$props2 = this.props,\n          history = _this$props2.history,\n          deleteReview = _this$props2.deleteReview,\n          review = _this$props2.review,\n          currentUserId = _this$props2.currentUserId;\n    const reviewId = review ? review.id : null;\n    const concertId = review ? review.attributes.concert.id : null;\n    const userId = review ? review.attributes.user.id : null;\n    return currentUserId == userId ? React.createElement(Card, {\n      bg: \"secondary\",\n      text: \"black\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38\n      },\n      __self: this\n    }, React.createElement(ReviewForm, {\n      editMode: true,\n      handleSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40\n      },\n      __self: this\n    }), React.createElement(Button, {\n      variant: \"danger\",\n      onClick: () => deleteReview(reviewId, history, concertId, userId),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41\n      },\n      __self: this\n    }, \"Delete this review\")) : React.createElement(Card, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    }, \" \", React.createElement(Card.Title, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    }, \"This is not your review to edit!\"));\n  }\n\n}\n\n;\n\nconst mapStateToProps = (state, ownProps) => {\n  const currentUserId = state.currentUser ? state.currentUser.id : \"\";\n  return {\n    currentUserId\n  };\n};\n\nexport default connect(mapStateToProps, {\n  updateReview,\n  setFormDataForEdit,\n  resetReviewForm,\n  deleteReview\n})(EditReviewFormWrapper);","map":{"version":3,"sources":["/Users/maxbrooks/Development/code/moss/moss-client/src/containers/Reviews/EditReviewFormWrapper.js"],"names":["React","ReviewForm","updateReview","deleteReview","setFormDataForEdit","resetReviewForm","connect","Card","Button","EditReviewFormWrapper","Component","handleSubmit","formData","props","review","history","reviewId","id","componentDidMount","componentDidUpdate","prevProps","componentWillUnmount","render","currentUserId","concertId","attributes","concert","userId","user","mapStateToProps","state","ownProps","currentUser"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ReviewForm from '../.././components/reviews/ReviewForm'\nimport { updateReview, deleteReview } from '../.././actions/reviews/reviews'\nimport { setFormDataForEdit, resetReviewForm } from '../.././actions/reviews/reviewForm'\nimport { connect } from 'react-redux'\nimport Card from 'react-bootstrap/Card'\nimport Button from 'react-bootstrap/Button'\n\nclass EditReviewFormWrapper extends React.Component {\n  componentDidMount(){\n    this.props.review && this.props.setFormDataForEdit(this.props.review)\n  }\n\n  componentDidUpdate(prevProps) {\n    this.props.review && !prevProps.review && this.props.setFormDataForEdit(this.props.review)\n  }\n\n  componentWillUnmount() {\n    this.props.resetReviewForm()\n  }\n\n  handleSubmit = (formData) => {\n    const { updateReview, review, history } = this.props\n    updateReview({\n      ...formData,\n      reviewId: review.id\n    }, history)\n  }\n\n  render() {\n    const { history, deleteReview, review, currentUserId } = this.props\n    const reviewId = review ? review.id : null\n    const concertId = review ? review.attributes.concert.id : null\n    const userId = review ? review.attributes.user.id : null\n\n    return (\n      currentUserId == userId ?\n        <Card bg=\"secondary\" text=\"black\">\n              <ReviewForm editMode handleSubmit={this.handleSubmit} />\n              <br/>\n              <Button variant=\"danger\" onClick={()=>deleteReview(reviewId, history, concertId, userId)}>Delete this review</Button>\n        </Card> : <Card> <Card.Title>This is not your review to edit!</Card.Title></Card>\n    )\n  }\n};\n\nconst mapStateToProps = (state, ownProps) => {\n  const currentUserId = state.currentUser ? state.currentUser.id : \"\"\n  return ({\n    currentUserId\n  })\n}\n\n\nexport default connect(mapStateToProps, { updateReview, setFormDataForEdit, resetReviewForm, deleteReview })(EditReviewFormWrapper);\n"]},"metadata":{},"sourceType":"module"}