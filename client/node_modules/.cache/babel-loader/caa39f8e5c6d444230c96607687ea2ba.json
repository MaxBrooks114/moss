{"ast":null,"code":"import axios from 'axios';\nexport const setConcerts = concerts => {\n  return {\n    type: \"SET_CONCERTS\",\n    concerts\n  };\n};\nexport const clearConcerts = () => {\n  return {\n    type: \"CLEAR_CONCERTS\"\n  };\n};\nconst REACT_APP_SEATGEEK_CLIENT_ID = process.env.REACT_APP_SEATGEEK_CLIENT_ID;\nexport const getConcerts = query => {\n  return dispatch => {\n    dispatch({\n      type: 'LOADING_CONCERTS'\n    });\n    return axios.get(\"https://rest.bandsintown.com/artists/Kishi%20Bashi/events?app_id=73b689174c8cd3f299a050e1c75f57a5&date=past\").then(concerts => {\n      dispatch({\n        type: 'GET_CONCERTS',\n        concerts\n      });\n    }).then(concerts => {\n      dispatch(addReviewsToConcerts(concerts));\n    });\n  };\n};\nexport const addReviewsToConcerts = concerts => {\n  return (dispatch, getState) => {\n    const theConcerts = concerts;\n    const reviews = getState().reviews.reviews;\n    return theConcerts = concerts.map(concert => concert.reviews = reviews.filter(review => review.concert.id === concert.id)).then(theConcerts => {\n      dispatch({\n        type: 'ADD_REVIEWS_TO_CONCERTS',\n        concerts\n      });\n    });\n  };\n};","map":{"version":3,"sources":["/Users/maxbrooks/Development/code/moss/moss-client/src/actions/concerts.js"],"names":["axios","setConcerts","concerts","type","clearConcerts","REACT_APP_SEATGEEK_CLIENT_ID","process","env","getConcerts","query","dispatch","get","then","addReviewsToConcerts","getState","theConcerts","reviews","map","concert","filter","review","id"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAIA,OAAO,MAAMC,WAAW,GAAGC,QAAQ,IAAI;AACrC,SAAO;AACLC,IAAAA,IAAI,EAAE,cADD;AAELD,IAAAA;AAFK,GAAP;AAID,CALM;AAOP,OAAO,MAAME,aAAa,GAAG,MAAM;AACjC,SAAO;AACLD,IAAAA,IAAI,EAAE;AADD,GAAP;AAGD,CAJM;AAMP,MAAME,4BAA4B,GAAGC,OAAO,CAACC,GAAR,CAAYF,4BAAjD;AAEA,OAAO,MAAMG,WAAW,GAAIC,KAAD,IAAW;AACpC,SAAQC,QAAD,IAAc;AACnBA,IAAAA,QAAQ,CAAC;AAAEP,MAAAA,IAAI,EAAE;AAAR,KAAD,CAAR;AACA,WAAOH,KAAK,CAACW,GAAN,CAAU,6GAAV,EACJC,IADI,CACCV,QAAQ,IAAI;AAACQ,MAAAA,QAAQ,CAAC;AAAEP,QAAAA,IAAI,EAAE,cAAR;AAAwBD,QAAAA;AAAxB,OAAD,CAAR;AAA6C,KAD3D,EAEJU,IAFI,CAECV,QAAQ,IAAI;AAACQ,MAAAA,QAAQ,CAACG,oBAAoB,CAACX,QAAD,CAArB,CAAR;AAAyC,KAFvD,CAAP;AAGC,GALH;AAMG,CAPE;AASP,OAAO,MAAMW,oBAAoB,GAAIX,QAAD,IAAc;AAChD,SAAO,CAACQ,QAAD,EAAWI,QAAX,KAAwB;AAC7B,UAAMC,WAAW,GAAGb,QAApB;AAD6B,UAErBc,OAFqB,GAETF,QAAQ,GAAGE,OAFF,CAErBA,OAFqB;AAG7B,WAAOD,WAAW,GAAGb,QAAQ,CAACe,GAAT,CAAaC,OAAO,IAAIA,OAAO,CAACF,OAAR,GAAkBA,OAAO,CAACG,MAAR,CAAeC,MAAM,IAAIA,MAAM,CAACF,OAAP,CAAeG,EAAf,KAAsBH,OAAO,CAACG,EAAvD,CAA1C,EACpBT,IADoB,CACfG,WAAW,IAAI;AAACL,MAAAA,QAAQ,CAAC;AAAEP,QAAAA,IAAI,EAAE,yBAAR;AAAmCD,QAAAA;AAAnC,OAAD,CAAR;AAAwD,KADzD,CAArB;AAEH,GALC;AAMD,CAPM","sourcesContent":["import axios from 'axios';\n\n\n\nexport const setConcerts = concerts => {\n  return {\n    type: \"SET_CONCERTS\",\n    concerts\n  }\n}\n\nexport const clearConcerts = () => {\n  return {\n    type: \"CLEAR_CONCERTS\"\n  }\n}\n\nconst REACT_APP_SEATGEEK_CLIENT_ID = process.env.REACT_APP_SEATGEEK_CLIENT_ID ;\n\nexport const getConcerts = (query) => {\n  return (dispatch) => {\n    dispatch({ type: 'LOADING_CONCERTS' });\n    return axios.get(\"https://rest.bandsintown.com/artists/Kishi%20Bashi/events?app_id=73b689174c8cd3f299a050e1c75f57a5&date=past\")\n      .then(concerts => {dispatch({ type: 'GET_CONCERTS', concerts })})\n      .then(concerts => {dispatch(addReviewsToConcerts(concerts))})\n    }\n    }\n\nexport const addReviewsToConcerts = (concerts) => {\n  return (dispatch, getState) => {\n    const theConcerts = concerts\n    const { reviews } = getState().reviews\n    return theConcerts = concerts.map(concert => concert.reviews = reviews.filter(review => review.concert.id === concert.id))\n    .then(theConcerts => {dispatch({ type: 'ADD_REVIEWS_TO_CONCERTS', concerts })})\n}\n}\n"]},"metadata":{},"sourceType":"module"}