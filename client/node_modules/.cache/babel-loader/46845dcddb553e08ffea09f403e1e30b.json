{"ast":null,"code":"import { resetLogin } from './login.js';\nimport { resetSignup } from \"./signup.js\";\nimport { clearConcerts } from './concerts/concerts';\nimport { clearReviews } from './reviews/reviews';\nexport const setCurrentUser = user => {\n  return {\n    type: \"SET_CURRENT_USER\",\n    user\n  };\n};\nexport const clearCurrentUser = user => {\n  return {\n    type: \"CLEAR_CURRENT_USER\"\n  };\n};\nexport const login = (credentials, history) => {\n  return dispatch => {\n    return fetch(\"https://moss-backend.herokuapp.com/api/v1/login\", {\n      credentials: \"include\",\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(credentials)\n    }).then(r => r.json()).then(user => {\n      if (user.error) {\n        alert(user.error);\n      } else {\n        dispatch(setCurrentUser(user.data));\n        dispatch(resetLogin());\n        history.push('/about');\n      }\n    }).catch(console.log());\n  };\n};\nexport const logout = () => {\n  return dispatch => {\n    dispatch(clearCurrentUser());\n    dispatch(clearConcerts());\n    dispatch(clearReviews());\n    return fetch(\"https://moss-backend.herokuapp.com/api/v1/logout\", {\n      credentials: \"include\",\n      method: \"DELETE\"\n    });\n  };\n};\nexport const signup = (credentials, history) => {\n  return dispatch => {\n    const userInfo = {\n      user: credentials\n    };\n    return fetch(\"https://moss-backend.herokuapp.com/api/v1/signup\", {\n      credentials: \"include\",\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(userInfo)\n    }).then(r => r.json()).then(user => {\n      if (user.error) {\n        alert(user.error);\n      } else {\n        dispatch(setCurrentUser(user.data));\n        dispatch(resetSignup());\n        history.push('/about');\n      }\n    }).catch(console.log());\n  };\n};\nexport const getCurrentUser = () => {\n  return dispatch => {\n    return fetch(\"https://moss-backend.herokuapp.com/api/v1/get_current_user\", {\n      credentials: \"include\",\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(r => r.json()).then(user => {\n      if (user.error) {\n        alert(user.error);\n      } else {\n        dispatch(setCurrentUser(user.data));\n      }\n    }).catch(console.log());\n  };\n};","map":{"version":3,"sources":["/Users/maxbrooks/Development/code/moss/moss-client/src/actions/currentUser.js"],"names":["resetLogin","resetSignup","clearConcerts","clearReviews","setCurrentUser","user","type","clearCurrentUser","login","credentials","history","dispatch","fetch","method","headers","body","JSON","stringify","then","r","json","error","alert","data","push","catch","console","log","logout","signup","userInfo","getCurrentUser"],"mappings":"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","sourcesContent":["import {\n  resetLogin\n} from './login.js'\nimport {\n  resetSignup\n} from \"./signup.js\"\nimport {\n  clearConcerts\n} from './concerts/concerts'\nimport {\n  clearReviews\n} from './reviews/reviews'\n\n\n\n\n\nexport const setCurrentUser = user => {\n  return {\n    type: \"SET_CURRENT_USER\",\n    user\n  }\n}\n\nexport const clearCurrentUser = user => {\n  return {\n    type: \"CLEAR_CURRENT_USER\"\n  }\n}\n\n\nexport const login = (credentials, history) => {\n  return dispatch => {\n    return fetch(\"https://moss-backend.herokuapp.com/api/v1/login\", {\n        credentials: \"include\",\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(credentials)\n      })\n      .then(r => r.json())\n      .then(user => {\n        if (user.error) {\n          alert(user.error)\n        } else {\n          dispatch(setCurrentUser(user.data))\n          dispatch(resetLogin())\n          history.push('/about')\n        }\n      })\n      .catch(console.log())\n  }\n}\n\nexport const logout = () => {\n  return dispatch => {\n    dispatch(clearCurrentUser())\n    dispatch(clearConcerts())\n    dispatch(clearReviews())\n    return fetch(\"https://moss-backend.herokuapp.com/api/v1/logout\", {\n      credentials: \"include\",\n      method: \"DELETE\"\n    })\n  }\n}\n\nexport const signup = (credentials, history) => {\n  return dispatch => {\n    const userInfo = {\n      user: credentials\n    }\n    return fetch(\"https://moss-backend.herokuapp.com/api/v1/signup\", {\n        credentials: \"include\",\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(userInfo)\n      })\n      .then(r => r.json())\n      .then(user => {\n        if (user.error) {\n          alert(user.error)\n        } else {\n          dispatch(setCurrentUser(user.data))\n          dispatch(resetSignup())\n          history.push('/about')\n        }\n      })\n      .catch(console.log())\n  }\n}\n\nexport const getCurrentUser = () => {\n  return dispatch => {\n    return fetch(\"https://moss-backend.herokuapp.com/api/v1/get_current_user\", {\n        credentials: \"include\",\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n\n      })\n      .then(r => r.json())\n      .then(user => {\n        if (user.error) {\n          alert(user.error)\n        } else {\n          dispatch(setCurrentUser(user.data))\n        }\n      })\n      .catch(console.log())\n  }\n}"]},"metadata":{},"sourceType":"module"}